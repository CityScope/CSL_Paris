(this.webpackJsonpchampscope=this.webpackJsonpchampscope||[]).push([[0],{121:function(e,t,a){e.exports=a(141)},130:function(e,t,a){},131:function(e,t,a){},138:function(e,t,a){},141:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(14),c=a.n(i),o=a(29),s=a(44),l=a(31),u=a(32),m=a(36),p=a(6),d=a(181),h=a(143),f=a(107),g=a(182),b=a(184),v=a(24),w=(a(130),a(179));function E(){return r.a.createElement("div",null,r.a.createElement(w.a,{style:{borderColor:"#fff",color:"white",fontWeight:"bolder"}}))}var y=a(183),S=Object(f.a)({typography:{button:{fontFamily:'"Open Sans", "sans-serif"'}}}),x=Object(d.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}}}}));function O(){var e=x();return r.a.createElement(g.a,{theme:S},r.a.createElement("div",{className:e.root},r.a.createElement(y.a,{style:{borderColor:"#fff",color:"white",fontWeight:"bolder"},variant:"outlined"},"Enter CityScope")))}var k=a(192),j=(a(131),a(65)),_=a.n(j),C=function(){return r.a.createElement("div",{className:"video-background"},r.a.createElement("div",{className:"video-foreground"},r.a.createElement(_.a,{url:"https://vimeo.com/390936231",playing:!0,controls:!1,muted:!0,loop:!0,width:"0em",height:"0em"})))};var L=a(70),M=a.n(L);var T={setStartSceneState:function(e){return{type:"SET_START_SCENE",data:e}}},N=Object(v.b)((function(e){return{readyState:e.LOADING}}),T)((function(e){var t=Object(f.a)({overrides:{MuiCssBaseline:{"@global":{"*":{"scrollbar-width":"thin"},"*::-webkit-scrollbar":{width:"4px",height:"4px"}}}},palette:{background:{default:"black"},color:{default:"#fff"}},typography:{h2:{fontFamily:["Cormorant Garamond","cursive"].join(","),fontWeight:400,fontSize:"5em"},subtitle1:{fontFamily:'"Cormorant Garamond", "sans-serif"',fontWeight:300,fontSize:"1.5em"},subtitle2:{fontFamily:'"Cormorant Garamond", "sans-serif"'},caption:{fontFamily:'"Cormorant Garamond", "sans-serif"',fontSize:"1em"},h6:{fontFamily:["Cormorant Garamond","cursive"].join(",")}}}),a=Object(d.a)((function(e){var t;return{box:(t={background:"none",color:"#fff",padding:e.spacing(3)},Object(p.a)(t,e.breakpoints.down("sm"),{maxWidth:"90vw"}),Object(p.a)(t,e.breakpoints.up("md"),{maxWidth:"50vw"}),Object(p.a)(t,e.breakpoints.up("lg"),{maxWidth:"50vw"}),Object(p.a)(t,"textAlign","center"),Object(p.a)(t,"marginLeft","auto"),Object(p.a)(t,"marginRight","auto"),Object(p.a)(t,"maxHeight","100vh"),Object(p.a)(t,"overflow","auto"),t)}})),i=Object(n.useState)(!1),c=Object(m.a)(i,2),o=c[0],s=c[1],l=a();return o?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{theme:t},r.a.createElement(k.a,{className:l.box},r.a.createElement(b.a,null),r.a.createElement(k.a,{p:3}),r.a.createElement(h.a,{variant:"h2"},"CITYSCOPE"),r.a.createElement(h.a,{variant:"h2"},"Champs-\xc9lys\xe9es "),r.a.createElement(k.a,{p:2}),e.readyState?r.a.createElement(E,null):r.a.createElement("div",{onClick:function(t){t.preventDefault(),s(!0),e.setStartSceneState(!0)}},r.a.createElement(O,null)),r.a.createElement(k.a,{p:3},r.a.createElement(h.a,{variant:"subtitle1"},"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.")),r.a.createElement(k.a,{p:3}),r.a.createElement(h.a,{variant:"h6"},"Exhabition in Pavillon de l'Arsenal"),r.a.createElement(k.a,{p:1}),r.a.createElement("div",null,r.a.createElement(M.a,null),r.a.createElement("div",null,r.a.createElement(h.a,{variant:"caption"},"PCA"))),r.a.createElement("div",null,r.a.createElement(M.a,null),r.a.createElement("div",null,r.a.createElement(h.a,{variant:"caption"},"GAMA"))),r.a.createElement("div",null,r.a.createElement(M.a,null),r.a.createElement("div",null,r.a.createElement(h.a,{variant:"caption"},"MIT City Science"))),r.a.createElement(k.a,{p:3}),r.a.createElement(h.a,{variant:"h6"},"Virtual Champs-\xc9lys\xe9es"),r.a.createElement(k.a,{p:1}),r.a.createElement(h.a,{variant:"caption"},"Ariel Noyman, Arnaud Grignard, Nicolas Ayoub, Luis Alonso, Kent Larson"))),r.a.createElement(C,{youtubeId:"MVhauHKiEPA"}))})),A=a(42),R=a(188),I=a(189),D=a(185);function F(e){var t=Object(d.a)((function(t){return{root:{width:30,height:12,padding:0,margin:t.spacing(1)},switchBase:{padding:1,"&$checked":{transform:"translateX(16px)",color:t.palette.common.white,"& + $track":{backgroundColor:e.knobcolor||"#888",opacity:1}},"&$focusVisible $thumb":{color:"#888",border:"1px solid #FFF"}},thumb:{width:10,height:10},track:{borderRadius:15,backgroundColor:"#FFF3",opacity:1},checked:{},focusVisible:{}}}))();return r.a.createElement(D.a,Object.assign({focusVisibleClassName:t.focusVisible,disableRipple:!0,classes:{root:t.root,switchBase:t.switchBase,thumb:t.thumb,track:t.track,checked:t.checked}},e))}function W(){return r.a.createElement("div",{style:{borderRight:"1px solid #fff3",minHeight:"10em",maxHeight:"100em"}})}var P=a(144),B=a(103),U=a.n(B),q=a(187),z=a(195),V=a(100),G=a.n(V),H=a(99),Z=a.n(H),X={audioIconWrapper:{color:"rgba(255,255,255)",width:30,height:30,padding:0}},$=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={playing:!1},e.handlePause=function(){e.setState({playing:!1})},e.handlePlay=function(){e.setState({playing:!0})},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,e.state.playing?r.a.createElement(P.a,{onClick:e.handlePause},r.a.createElement(Z.a,{style:X.audioIconWrapper})):r.a.createElement(P.a,{onClick:e.handlePlay},r.a.createElement(G.a,{style:X.audioIconWrapper})),r.a.createElement(_.a,{url:"resources/audio/ace.mp3",playing:this.state.playing,controls:!1,loop:!0,width:"0em",height:"0em"}))}}]),a}(n.Component),Q=a(101),J=a.n(Q),Y=a(193),K=a(145),ee=Object(f.a)({overrides:{MuiCssBaseline:{"@global":{"*":{"scrollbar-width":"thin"},"*::-webkit-scrollbar":{width:"5px",height:"10px"}}}},palette:{textPrimary:{main:"white"}},typography:{h2:{fontFamily:'"Cormorant Garamond", "sans-serif"',fontSize:"3em"},subtitle1:{fontFamily:'"Cormorant Garamond", "sans-serif"',fontSize:"1.5em"}}}),te=Object(d.a)((function(e){return{paper:{color:"white",background:"rgba(0,0,0,0.9)",marginBottom:"0em",overflow:"auto",padding:"3em"}}}));function ae(){var e=te(),t=r.a.useState(!1),a=Object(m.a)(t,2),n=a[0],i=a[1];return r.a.createElement(g.a,{theme:ee},r.a.createElement("div",null,r.a.createElement(J.a,{type:"button",style:{color:"white"},onClick:function(){i(!0)}}),r.a.createElement(b.a,null),r.a.createElement(Y.a,{open:n,onClose:function(){i(!1)},id:"modal"},r.a.createElement(K.a,{className:e.paper},r.a.createElement(h.a,{variant:"h2"},"CityScope Champs-\xc9lys\xe9es"),r.a.createElement(k.a,{p:3}),r.a.createElement(h.a,{variant:"subtitle1"},"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.")))))}var ne=a(94);function re(){var e=Object(d.a)((function(){return{CSlogo:{position:"fixed",bottom:"1em",right:"1em",color:"white",fontSize:"4em"}}}))();return r.a.createElement(ne.a,{className:e.CSlogo,onClick:function(){return window.open("http://cityscope.media.mit.edu/","_blank")}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 120 120"},r.a.createElement("path",{fill:"#FFF",d:"M 60.2 38.4 c -0.5 0 -1 -0.1 -1.5 -0.3 c -0.4 -0.2 -0.8 -0.4 -1.1 -0.7 c -0.3 -0.3 -0.6 -0.7 -0.7 -1.1 c -0.2 -0.4 -0.3 -0.9 -0.3 -1.4 c 0 -0.5 0.1 -1 0.2 -1.4 c 0.2 -0.4 0.4 -0.8 0.7 -1.1 c 0.3 -0.3 0.7 -0.6 1.1 -0.7 c 0.4 -0.2 0.9 -0.3 1.4 -0.3 c 0.5 0 0.9 0.1 1.2 0.2 c 0.4 0.1 0.7 0.3 1 0.5 c 0.3 0.2 0.5 0.5 0.7 0.8 c 0.2 0.3 0.3 0.7 0.3 1 h -2.1 c -0.1 -0.3 -0.2 -0.5 -0.4 -0.7 c -0.2 -0.2 -0.4 -0.3 -0.7 -0.3 c -0.5 0 -0.8 0.2 -1 0.5 c -0.2 0.4 -0.3 0.8 -0.3 1.4 c 0 0.6 0.1 1.1 0.3 1.4 c 0.2 0.3 0.6 0.5 1 0.5 c 0.7 0 1.1 -0.4 1.2 -1.2 h 2 c 0 0.4 -0.1 0.7 -0.3 1.1 c -0.2 0.3 -0.4 0.6 -0.6 0.9 c -0.3 0.2 -0.6 0.4 -1 0.6 C 61.1 38.4 60.6 38.4 60.2 38.4 Z M 64 28.8 h 2.1 v 1.7 H 64 V 28.8 Z M 64 31.5 h 2.1 v 6.7 H 64 V 31.5 Z M 69.9 38.3 c -0.3 0 -0.6 0 -0.9 -0.1 c -0.3 -0.1 -0.5 -0.2 -0.7 -0.3 c -0.2 -0.1 -0.3 -0.3 -0.4 -0.6 c -0.1 -0.2 -0.2 -0.5 -0.2 -0.9 v -3.6 h -0.9 v -1.3 h 0.9 v -2.1 h 2.1 v 2.1 H 71 v 1.3 h -1.2 V 36 c 0 0.3 0.1 0.4 0.2 0.5 c 0.1 0.1 0.3 0.1 0.5 0.1 c 0.1 0 0.2 0 0.3 0 c 0.1 0 0.2 0 0.2 0 v 1.6 c -0.1 0 -0.2 0.1 -0.4 0.1 C 70.4 38.3 70.2 38.3 69.9 38.3 Z M 72.2 38.8 H 73 c 0.3 0 0.5 -0.1 0.7 -0.2 c 0.1 -0.1 0.2 -0.3 0.2 -0.5 c 0 -0.1 0 -0.3 -0.1 -0.5 c -0.1 -0.2 -0.2 -0.5 -0.3 -0.9 l -2 -5.2 h 2.3 l 0.9 2.9 c 0.1 0.2 0.1 0.3 0.2 0.5 c 0 0.2 0.1 0.3 0.1 0.5 c 0 0.2 0.1 0.3 0.1 0.5 h 0 c 0 -0.2 0.1 -0.3 0.1 -0.5 c 0 -0.1 0.1 -0.3 0.1 -0.5 c 0 -0.2 0.1 -0.4 0.2 -0.5 l 0.9 -2.9 h 2.1 l -2.3 6.8 c -0.1 0.4 -0.3 0.7 -0.4 1 c -0.2 0.3 -0.3 0.5 -0.5 0.7 c -0.2 0.2 -0.4 0.3 -0.7 0.4 c -0.3 0.1 -0.6 0.1 -0.9 0.1 h -1.4 V 38.8 Z M 59.8 50 c -1 0 -1.8 -0.2 -2.3 -0.6 c -0.6 -0.4 -0.9 -1 -0.9 -1.8 h 2 c 0 0.3 0.2 0.6 0.4 0.7 c 0.2 0.2 0.5 0.2 0.9 0.2 c 0.3 0 0.6 -0.1 0.8 -0.2 c 0.2 -0.1 0.3 -0.3 0.3 -0.5 c 0 -0.1 0 -0.3 -0.1 -0.4 c -0.1 -0.1 -0.2 -0.2 -0.4 -0.2 c -0.2 -0.1 -0.3 -0.1 -0.5 -0.1 c -0.2 0 -0.4 -0.1 -0.6 -0.1 c -0.3 -0.1 -0.6 -0.1 -0.9 -0.2 c -0.3 -0.1 -0.5 -0.2 -0.8 -0.3 c -0.2 -0.1 -0.4 -0.3 -0.6 -0.6 c -0.1 -0.2 -0.2 -0.6 -0.2 -1 c 0 -0.3 0.1 -0.7 0.2 -0.9 c 0.2 -0.3 0.4 -0.5 0.6 -0.7 c 0.3 -0.2 0.6 -0.3 0.9 -0.4 c 0.4 -0.1 0.7 -0.1 1.1 -0.1 c 1 0 1.7 0.2 2.2 0.6 c 0.5 0.4 0.8 0.9 0.8 1.6 h -2 c 0 -0.3 -0.2 -0.5 -0.3 -0.6 c -0.2 -0.1 -0.4 -0.2 -0.7 -0.2 c -0.3 0 -0.5 0 -0.7 0.2 c -0.2 0.1 -0.3 0.3 -0.3 0.5 c 0 0.1 0 0.2 0.1 0.3 c 0.1 0.1 0.2 0.1 0.4 0.2 c 0.1 0 0.3 0.1 0.5 0.1 c 0.2 0 0.4 0.1 0.6 0.1 c 0.3 0.1 0.6 0.1 0.9 0.2 c 0.3 0.1 0.6 0.2 0.8 0.3 c 0.2 0.2 0.5 0.4 0.6 0.6 c 0.2 0.3 0.2 0.6 0.2 1 c 0 0.4 -0.1 0.7 -0.2 1 c -0.2 0.3 -0.4 0.5 -0.6 0.7 c -0.3 0.2 -0.6 0.3 -1 0.4 C 60.6 50 60.2 50 59.8 50 Z M 66.8 50 c -0.5 0 -1 -0.1 -1.5 -0.3 c -0.4 -0.2 -0.8 -0.4 -1.1 -0.7 c -0.3 -0.3 -0.6 -0.7 -0.7 -1.1 c -0.2 -0.4 -0.3 -0.9 -0.3 -1.4 c 0 -0.5 0.1 -1 0.2 -1.4 c 0.2 -0.4 0.4 -0.8 0.7 -1.1 c 0.3 -0.3 0.7 -0.6 1.1 -0.7 c 0.4 -0.2 0.9 -0.3 1.4 -0.3 c 0.5 0 0.9 0.1 1.2 0.2 c 0.4 0.1 0.7 0.3 1 0.5 c 0.3 0.2 0.5 0.5 0.7 0.8 c 0.2 0.3 0.3 0.7 0.3 1 h -2.1 c -0.1 -0.3 -0.2 -0.5 -0.4 -0.7 c -0.2 -0.2 -0.4 -0.3 -0.7 -0.3 c -0.5 0 -0.8 0.2 -1 0.5 c -0.2 0.4 -0.3 0.8 -0.3 1.4 c 0 0.6 0.1 1.1 0.3 1.4 c 0.2 0.3 0.6 0.5 1 0.5 c 0.7 0 1.1 -0.4 1.2 -1.2 h 2 c 0 0.4 -0.1 0.7 -0.3 1.1 c -0.2 0.3 -0.4 0.6 -0.6 0.9 c -0.3 0.2 -0.6 0.4 -1 0.6 C 67.8 49.9 67.3 50 66.8 50 Z M 70.7 40.4 h 2.1 v 1.7 h -2.1 V 40.4 Z M 70.7 43.1 h 2.1 v 6.7 h -2.1 V 43.1 Z M 77.2 50 c -0.6 0 -1 -0.1 -1.5 -0.3 c -0.4 -0.2 -0.8 -0.4 -1.1 -0.7 c -0.3 -0.3 -0.5 -0.7 -0.7 -1.1 c -0.2 -0.4 -0.2 -0.9 -0.2 -1.4 c 0 -0.5 0.1 -1 0.2 -1.4 s 0.4 -0.8 0.7 -1.1 c 0.3 -0.3 0.7 -0.6 1.1 -0.7 c 0.4 -0.2 0.9 -0.3 1.4 -0.3 c 0.5 0 0.9 0.1 1.3 0.2 c 0.4 0.1 0.7 0.4 1 0.6 c 0.4 0.4 0.7 0.8 0.9 1.4 c 0.2 0.6 0.3 1.2 0.3 1.9 h -4.8 c 0.1 0.5 0.2 0.8 0.5 1.1 c 0.2 0.3 0.6 0.4 1 0.4 c 0.3 0 0.5 -0.1 0.7 -0.2 c 0.2 -0.1 0.3 -0.3 0.4 -0.5 h 2.1 c -0.1 0.3 -0.2 0.6 -0.4 0.9 c -0.2 0.3 -0.4 0.5 -0.7 0.7 c -0.3 0.2 -0.6 0.4 -0.9 0.5 C 78 49.9 77.6 50 77.2 50 Z M 78.3 45.7 c 0 -0.4 -0.2 -0.7 -0.4 -1 c -0.2 -0.2 -0.5 -0.4 -0.9 -0.4 c -0.4 0 -0.7 0.1 -0.9 0.4 c -0.2 0.2 -0.4 0.6 -0.4 1 H 78.3 Z M 81.2 43.1 h 2.1 V 44 h 0 c 0.3 -0.4 0.5 -0.6 0.9 -0.8 c 0.3 -0.2 0.7 -0.3 1.2 -0.3 c 0.4 0 0.7 0.1 1 0.2 c 0.3 0.1 0.5 0.3 0.7 0.5 c 0.2 0.2 0.4 0.5 0.5 0.8 c 0.1 0.3 0.2 0.7 0.2 1 v 4.4 h -2.1 v -3.9 c 0 -0.4 -0.1 -0.6 -0.3 -0.9 c -0.2 -0.2 -0.4 -0.3 -0.8 -0.3 c -0.4 0 -0.6 0.1 -0.9 0.4 c -0.2 0.3 -0.3 0.6 -0.3 1 v 3.7 h -2.1 V 43.1 Z M 92 50 c -0.5 0 -1 -0.1 -1.5 -0.3 c -0.4 -0.2 -0.8 -0.4 -1.1 -0.7 c -0.3 -0.3 -0.6 -0.7 -0.7 -1.1 c -0.2 -0.4 -0.3 -0.9 -0.3 -1.4 c 0 -0.5 0.1 -1 0.2 -1.4 c 0.2 -0.4 0.4 -0.8 0.7 -1.1 c 0.3 -0.3 0.7 -0.6 1.1 -0.7 c 0.4 -0.2 0.9 -0.3 1.4 -0.3 c 0.5 0 0.9 0.1 1.2 0.2 c 0.4 0.1 0.7 0.3 1 0.5 c 0.3 0.2 0.5 0.5 0.7 0.8 c 0.2 0.3 0.3 0.7 0.3 1 h -2.1 c -0.1 -0.3 -0.2 -0.5 -0.4 -0.7 c -0.2 -0.2 -0.4 -0.3 -0.7 -0.3 c -0.5 0 -0.8 0.2 -1 0.5 c -0.2 0.4 -0.3 0.8 -0.3 1.4 c 0 0.6 0.1 1.1 0.3 1.4 c 0.2 0.3 0.6 0.5 1 0.5 c 0.7 0 1.1 -0.4 1.2 -1.2 h 2 c 0 0.4 -0.1 0.7 -0.3 1.1 c -0.2 0.3 -0.4 0.6 -0.6 0.9 c -0.3 0.2 -0.6 0.4 -1 0.6 C 92.9 49.9 92.4 50 92 50 Z M 99.1 50 c -0.6 0 -1 -0.1 -1.5 -0.3 c -0.4 -0.2 -0.8 -0.4 -1.1 -0.7 c -0.3 -0.3 -0.5 -0.7 -0.7 -1.1 c -0.2 -0.4 -0.2 -0.9 -0.2 -1.4 c 0 -0.5 0.1 -1 0.2 -1.4 s 0.4 -0.8 0.7 -1.1 c 0.3 -0.3 0.7 -0.6 1.1 -0.7 c 0.4 -0.2 0.9 -0.3 1.4 -0.3 c 0.5 0 0.9 0.1 1.3 0.2 c 0.4 0.1 0.7 0.4 1 0.6 c 0.4 0.4 0.7 0.8 0.9 1.4 c 0.2 0.6 0.3 1.2 0.3 1.9 h -4.8 c 0.1 0.5 0.2 0.8 0.5 1.1 c 0.2 0.3 0.6 0.4 1 0.4 c 0.3 0 0.5 -0.1 0.7 -0.2 c 0.2 -0.1 0.3 -0.3 0.4 -0.5 h 2.1 c -0.1 0.3 -0.2 0.6 -0.4 0.9 c -0.2 0.3 -0.4 0.5 -0.7 0.7 c -0.3 0.2 -0.6 0.4 -0.9 0.5 C 99.9 49.9 99.6 50 99.1 50 Z M 100.3 45.7 c 0 -0.4 -0.2 -0.7 -0.4 -1 c -0.2 -0.2 -0.5 -0.4 -0.9 -0.4 c -0.4 0 -0.7 0.1 -0.9 0.4 c -0.2 0.2 -0.4 0.6 -0.4 1 H 100.3 Z M 0 49.9 L 0 0 M 0 0 v 49.8 h 21.3 v -7.1 H 7.1 V 7.1 h 42.7 V 0 L 0 0 Z M 14.2 14.2 v 21.3 h 28.5 v 7.1 H 28.5 v 7.1 h 21.3 V 28.5 H 21.3 v -7.1 h 28.5 v -7.1 H 14.2 Z"})))}var ie=a(197),ce=a(190),oe=a(194),se=a(199),le=a(191),ue=a(196);a(138);function me(e){var t=Object(d.a)({root:{position:"fixed",bottom:"25em",right:"3em",zIndex:9999}}),a=Object(f.a)({palette:{textPrimary:{main:"white"}},typography:{h3:{fontFamily:'"Cormorant Garamond", "sans-serif"',fontSize:"5em",fontWeight:"300",color:"white",textShadow:"0em 0em 0.2em #000 "}}}),i=t(),c=r.a.useState(e),o=Object(m.a)(c,2),s=o[0],l=o[1];Object(n.useEffect)((function(){e.thisToggleName&&(l(!0),setTimeout((function(){l(!1)}),3e3))}),[e.thisToggleName]);var u=function(){switch(e.thisToggleName){case"parks":case"culturalBuildings":case"cars":case"bicycles":case"pedestrians":return r.a.createElement(h.a,{variant:"h3"},"Waiting for Luis");default:return r.a.createElement(r.a.Fragment,null)}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,null),r.a.createElement(g.a,{theme:a},r.a.createElement("div",{className:i.root+" ".concat(s?"show":"hide")},r.a.createElement(u,null))))}var pe={listenToMenuUI:function(e){return{type:"MENU_INTERACTION",data:e}}},de=Object(v.b)((function(e){return{toggleStates:e.MENU_INTERACTION}}),pe)((function(e){var t="#84ff03",a="#fe01fe",n="#fc0303",i="#03bafc",c="#FFF7",o=Object(f.a)({palette:{textPrimary:{main:"white"}},typography:{h5:{fontFamily:'"Cormorant Garamond", "sans-serif"',fontSize:"2.5em",fontWeight:"300"},h6:{fontFamily:'"Cormorant Garamond", "sans-serif"',fontSize:"1.6em",fontWeight:"400"},h3:{fontFamily:'"Roboto", "sans-serif"',fontSize:"1.5em"},caption:{fontFamily:'"Roboto", "sans-serif"',fontSize:"1em"}}}),s=Object(d.a)((function(){return{radio:{"&$checked":{color:"#fff"}},checked:{},toolBar:{alignItems:"end"},menuButton:{},title:{flexGrow:2},appBar:{spacing:"0",color:"white",background:"rgba(0,0,0,0.7)",width:"100vw"},menuIconWrapper:{color:"rgba(255,255,255)",position:"fixed",bottom:"2em",left:"2em",fontSize:"2em"},largeIcon:{width:40,height:40}}})),l=r.a.useState(!0),u=Object(m.a)(l,2),v=u[0],w=u[1],E=function(e){var t;x(Object(A.a)({},S,(t={},Object(p.a)(t,e,!S[e]),Object(p.a)(t,"thisToggleName",S[e]?null:e),t)))},y=s(),S=e.toggleStates,x=e.listenToMenuUI;return r.a.createElement(r.a.Fragment,null,r.a.createElement(re,null),r.a.createElement(b.a,null),r.a.createElement(g.a,{theme:o},r.a.createElement(me,{thisToggleName:S.thisToggleName}),r.a.createElement(z.a,{title:"Toggle Options",placement:"top"},r.a.createElement(P.a,{className:y.menuIconWrapper,variant:"outlined",onClick:function(){w((function(e){return!e}))}},r.a.createElement(U.a,{className:y.largeIcon}))),r.a.createElement(q.a,{timeout:500,in:v},r.a.createElement(R.a,{position:"static",className:y.appBar},r.a.createElement(I.a,{classes:{root:y.toolBar}},r.a.createElement(ce.a,{item:!0,xs:3,sm:3,md:3,lg:3},r.a.createElement(ie.a,null,r.a.createElement(h.a,{variant:"h6"},"present & future")),r.a.createElement(ie.a,null,r.a.createElement(F,{checked:S.scenarioSwitch,onChange:function(){return E("scenarioSwitch")},name:"scenarioSwitch"}),r.a.createElement(h.a,{variant:"caption"},"2020-2040")),r.a.createElement(ie.a,null,r.a.createElement(P.a,null,r.a.createElement(ae,null)),r.a.createElement(h.a,{variant:"caption"},"information")),r.a.createElement(ie.a,null,r.a.createElement(h.a,{variant:"h6"},"display")),r.a.createElement(ie.a,null,r.a.createElement(F,{checked:S.metricsObjSwitch,onChange:function(){return E("metricsObjSwitch")},name:"metricsObjSwitch"}),r.a.createElement(h.a,{variant:"caption"},"design metrics")),r.a.createElement(ie.a,null,r.a.createElement(F,{checked:S.cityModelSwitch,onChange:function(){return E("cityModelSwitch")},name:"cityModelSwitch"}),r.a.createElement(h.a,{variant:"caption"},"toggle 3D model"))),r.a.createElement(W,null),r.a.createElement(ce.a,{item:!0,xs:3,sm:3,md:3,lg:3},r.a.createElement(ie.a,null,r.a.createElement(h.a,{variant:"h6"},"spatial design")),r.a.createElement(ie.a,null,r.a.createElement(F,{knobcolor:t,checked:S.parks,onChange:function(){return E("parks")},name:"parks"}),r.a.createElement(h.a,{variant:"caption"},"parks")),r.a.createElement(ie.a,null,r.a.createElement(F,{knobcolor:a,checked:S.culturalBuildings,onChange:function(){return E("culturalBuildings")},name:"culturalBuildings"}),r.a.createElement(h.a,{variant:"caption"},"cultural")),r.a.createElement(ie.a,null,r.a.createElement(h.a,{variant:"h6"},"mobility")),r.a.createElement(ie.a,null,r.a.createElement(F,{knobcolor:n,checked:S.cars,onChange:function(){return E("cars")},name:"cars"}),r.a.createElement(h.a,{variant:"caption"},"cars")),r.a.createElement(ie.a,null,r.a.createElement(F,{knobcolor:i,checked:S.bicycles,onChange:function(){return E("bicycles")},name:"bicycles"}),r.a.createElement(h.a,{variant:"caption"},"bicycles")),r.a.createElement(ie.a,null,r.a.createElement(F,{knobcolor:c,checked:S.pedestrians,onChange:function(){return E("pedestrians")},name:"pedestrians"}),r.a.createElement(h.a,{variant:"caption"},"pedestrians"))),r.a.createElement(W,null),r.a.createElement(ce.a,{item:!0,xs:3,sm:3,md:3,lg:3},r.a.createElement(ie.a,null,r.a.createElement(h.a,{variant:"h6"},"select scene")),r.a.createElement(ie.a,null,r.a.createElement(ue.a,{component:"fieldset"},r.a.createElement(se.a,{"aria-label":"camera",name:"camera",onChange:function(e){x(Object(A.a)({},S,{cameraScene:e.target.value}))}},r.a.createElement(le.a,{value:"Triomphe",control:r.a.createElement(oe.a,{classes:{root:y.radio,checked:y.checked}}),label:r.a.createElement(h.a,{variant:"caption"},"Arc de Triomphe")}),r.a.createElement(le.a,{value:"Champs",control:r.a.createElement(oe.a,{classes:{root:y.radio,checked:y.checked}}),label:r.a.createElement(h.a,{variant:"caption"},"Avenue des Champs-\xc9lys\xe9es")}),r.a.createElement(le.a,{value:"Palais",control:r.a.createElement(oe.a,{classes:{root:y.radio,checked:y.checked}}),label:r.a.createElement(h.a,{variant:"caption"},"Grand & Petit Palais")}),r.a.createElement(le.a,{value:"Concorde",control:r.a.createElement(oe.a,{classes:{root:y.radio,checked:y.checked}}),label:r.a.createElement(h.a,{variant:"caption"},"Place de la Concorde")}))))),r.a.createElement(W,null),r.a.createElement(ce.a,{item:!0,xs:3,sm:3,md:3,lg:3},r.a.createElement(ie.a,null,r.a.createElement(h.a,{variant:"h6"},"settings")),r.a.createElement(ie.a,null,r.a.createElement($,null),r.a.createElement(h.a,{variant:"caption"},'"Aux Champs Elys\xe9es" by Arthur Des Ligneris')),r.a.createElement(ie.a,null,r.a.createElement(F,{checked:S.quality,onChange:function(){return E("quality")},name:"quality"}),r.a.createElement(h.a,{variant:"caption"},"render quality (for fast devices)"))))))))})),he=a(10),fe=a.n(he),ge=a(19),be=a(2),ve=a(20),we=a(104),Ee=a(108),ye=a(83),Se=a(105),xe=a(54),Oe=a(9),ke=function(e,t){var a=function(e,t){e.traverse((function(e){(e instanceof be.Mesh||e instanceof be.Sprite)&&(e.visible=t)}))};e&&(t?(a(e,t),e.position.y=e.position.y+1,new ve.a.Tween(e.position).to({y:e.position.y-1},1e3).easing(ve.a.Easing.Quadratic.Out).start()):new ve.a.Tween(e.position).to({y:e.position.y+1},1e3).easing(ve.a.Easing.Quadratic.Out).start().onComplete((function(){a(e,t),e.position.y=e.position.y-1})))},je=function(){var e=Object(ge.a)(fe.a.mark((function e(){var t,a,n,r,i,c,o;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie("./resources/textures/shadowmap.png");case 2:return t=e.sent,(a=new be.Color).setHSL(0,0,.5),n=new be.MeshPhongMaterial({color:a}),r=new be.MeshPhongMaterial({map:t,color:a}),i=[n,n,r,n,n,n],t.minFilter=be.LinearFilter,(c=new be.BoxBufferGeometry(1.57,.7,.92)).translate(0,.35,0),(o=new be.Mesh(c,i)).castShadow=!0,o.receiveShadow=!0,o.name="pedestalMesh",e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e=function(){var e=Object(ge.a)(fe.a.mark((function e(){var t,a,n,r,i,c,o;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie("./resources/textures/radar/rb.jpg");case 2:return t=e.sent,e.next=5,Ie("./resources/textures/radar/ra.jpg");case 5:return a=e.sent,(n=new be.Color).setHSL(0,0,.5),(r=new be.MeshStandardMaterial({name:"radarMaterial",color:n,userData:{radarBeforeText:t,radarAfterText:a},map:t,metalness:.2,roughness:10})).side=be.DoubleSide,i=[!1,r,!1,!1,r,r],t.minFilter=be.LinearFilter,(c=new be.BoxBufferGeometry(1.57,1.57,.002)).translate(0,1.8,0),(o=new be.Mesh(c,i)).castShadow=!1,o.receiveShadow=!1,o.name="metricsObj",e.abrupt("return",o);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(ge.a)(fe.a.mark((function e(){var t,a,n,r;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Oe.f.ppl,(a=new be.Color).setHSL(0,0,.2),n=new be.MeshLambertMaterial({color:a}),e.next=6,Re(t);case 6:return(r=e.sent).name="people",r.traverse((function(e){e.material=n,e.scale.set(.95,.95,.95),e.position.set(0,.01,0),e.castShadow=!0})),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Le=function(){var e=Object(ge.a)(fe.a.mark((function e(){var t,a,n;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new be.Object3D).name="landscapeModelsWrapper",a=fe.a.mark((function e(a){var n,r,i,c;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Oe.d[a].URL,r=Oe.d[a].color,i=Oe.d[a].position,c=Oe.d[a].scale,e.next=6,Re(n).then((function(e){t.add(e),e.name=a,e.scale.set(c,c,c),e.rotation.set(0,.4625123,0),e.traverse((function(e){e.material=new be.MeshPhongMaterial({color:new be.Color("hsl"+r)}),e.position.set(i[0],i[1],i[2])}))}));case 6:case"end":return e.stop()}}),e)})),e.t0=fe.a.keys(Oe.d);case 4:if((e.t1=e.t0()).done){e.next=9;break}return n=e.t1.value,e.delegateYield(a(n),"t2",7);case 7:e.next=4;break;case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=function(e,t,a,n,r){var i=.45,c=0,o=.1,s=new Se.a(a,n),l=new Ee.a(new be.Vector2(e,t),1,.4,.85);l.threshold=c,l.strength=i,l.radius=o;var u=new ye.a(r);u.renderToScreen=!1,u.addPass(s),u.addPass(l);var m=new xe.a(new be.ShaderMaterial({uniforms:{baseTexture:{value:null},bloomTexture:{value:u.renderTarget2.texture}},vertexShader:De().vertex,fragmentShader:De().frag}),"baseTexture");m.needsSwap=!0;var p=new ye.a(r);return p.addPass(s),p.addPass(m),{bloomComposer:u,finalComposer:p}},Te=function(){var e=Object(ge.a)(fe.a.mark((function e(){var t,a,n;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in(t=new be.Object3D).name="agentsWrapper",a=function(e){var a=Oe.h[e].URL;fetch(a).then((function(e){return e.json()})).then((function(a){var n=Ne(a,e);n.name=e,n.trips=a,t.add(n)})).catch((function(e){return console.error(e)}))},Oe.h)a(n);return t.rotation.set(0,.4625123,0),t.position.set(-822*Math.cos(.4625123)/2e3-.785,0,822*Math.sin(.4625123)/2e3-.46),t.rotation.set(0,.4625123,0),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ne=function(e,t){var a=new be.Color;a.setHSL(Oe.h[t].color.h,Oe.h[t].color.s,Oe.h[t].color.l);var n=(new be.TextureLoader).load("./resources/textures/agent.png");n.minFilter=be.LinearFilter;for(var r=new be.Object3D,i=0;i<e.length;i++){var c=new be.SpriteMaterial({map:n,transparent:!0}),o=new be.Sprite(c);o.material.color=a,o.material.blending=be.AdditiveBlending,o.material.transparent=!0,o.scale.set(.03,.03,.03),o.position.set(0,0,0),r.add(o)}return r},Ae=function(){var e=Object(ge.a)(fe.a.mark((function e(){var t,a,n;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re(Oe.b);case 2:return t=e.sent,(a=new be.Color).setHSL(0,0,.3),n=new be.MeshPhongMaterial({color:a}),t.name="cityModel",t.scale.set(505e-6,505e-6,505e-6),t.position.set(-.0055,.7,0),t.rotation.set(0,.4625123,0),t.traverse((function(e){e.material=n})),e.abrupt("return",t);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Re=function(){var e=Object(ge.a)(fe.a.mark((function e(t){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){(new we.a).load(t,e)})).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(ge.a)(fe.a.mark((function e(t){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){(new be.TextureLoader).load(t,e)})).then((function(e){return e.minFilter=be.LinearFilter,e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=function(){return{vertex:"\n    varying vec2 vUv;\n       void main() {\n           vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }\n    ",frag:" \n    uniform sampler2D baseTexture;\n    uniform sampler2D bloomTexture;\n    varying vec2 vUv;\n    vec4 getTexture( sampler2D texelToLinearTexture ) {\n        return mapTexelToLinear( texture2D( texelToLinearTexture , vUv ) );\n    }\n    void main() {\n        gl_FragColor = ( getTexture( baseTexture ) + vec4( 1.0 ) * getTexture( bloomTexture ) );\n    }"}},Fe=function(){var e=Object(ge.a)(fe.a.mark((function e(t){var a,n,r,i,c,o,s,l,u;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=15,n=15,r="./resources/textures/floor/",e.next=5,Ie(r+"WOOD_SML.jpg");case 5:return i=e.sent,e.next=8,Ie(r+"GLOSS.jpg");case 8:return c=e.sent,e.next=11,Ie(r+"WOOD_DISP.jpg");case 11:return o=e.sent,e.next=14,Ie(r+"NRM.jpg");case 14:return s=e.sent,i.anisotropy=t.capabilities.getMaxAnisotropy(),i.wrapS=be.RepeatWrapping,i.wrapT=be.RepeatWrapping,i.repeat.set(a,n),s.anisotropy=t.capabilities.getMaxAnisotropy(),s.wrapS=be.RepeatWrapping,s.wrapT=be.RepeatWrapping,s.repeat.set(a,n),c.anisotropy=t.capabilities.getMaxAnisotropy(),c.wrapS=be.RepeatWrapping,s.wrapT=be.RepeatWrapping,c.repeat.set(a,n),o.minFilter=be.LinearFilter,o.anisotropy=t.capabilities.getMaxAnisotropy(),o.wrapS=be.RepeatWrapping,o.wrapT=be.RepeatWrapping,o.repeat.set(a,n),l=new be.MeshStandardMaterial({aoMap:c,aoMapIntensity:1,color:16777215,map:i,metalnessMap:i,displacementMap:o,displacementScale:.1,normalMap:s,metalness:5,roughness:.5}),50,(u=new be.Mesh(new be.PlaneBufferGeometry(50,50),l)).receiveShadow=!0,u.rotation.x=-.5*Math.PI,u.position.y=0,u.position.z=0,e.abrupt("return",u);case 40:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),We=a(106),Pe=a.n(We),Be=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e))._init=Object(ge.a)(fe.a.mark((function e(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.shpContainer=new be.Object3D,e.t0=n._sceneSetup(),e.next=4,Ae().then((function(e){return n.scene.add(e)}));case 4:return e.t1=e.sent,e.next=7,Le().then((function(e){n.scene.add(e)}));case 7:return e.t2=e.sent,e.next=10,Fe(n.renderer).then((function(e){n.scene.add(e)}));case 10:return e.t3=e.sent,e.next=13,je().then((function(e){return n.scene.add(e)}));case 13:return e.t4=e.sent,e.next=16,_e().then((function(e){return n.scene.add(e)}));case 16:return e.t5=e.sent,e.next=19,Ce().then((function(e){return n.scene.add(e)}));case 19:return e.t6=e.sent,e.next=22,Te().then((function(e){n.agentWrapper=e,n.scene.add(n.agentWrapper)}));case 22:e.t7=e.sent,e.t0.then.call(e.t0,e.t1,e.t2,e.t3,e.t4,e.t5,e.t6,e.t7).then(n.setState({loading:!1}),n.props.setLoadingState(n.state.loading),n.startAnimationLoop());case 24:case"end":return e.stop()}}),e)}))),n._sceneSetup=Object(ge.a)(fe.a.mark((function e(){var t;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.scene=new be.Scene,n.scene.dispose(),n.camera=new be.PerspectiveCamera(50,n.width/n.height,.01,1e3),n.camera.position.z=-4,n.camera.position.x=0,n.camera.position.y=2,n.controls=new Pe.a(n.camera,n.mountingDiv),n.controls.maxDistance=7,n.controls.minDistance=.5,n.camera.lookAt(new be.Vector3(0,1.25,0)),n.controls.target.set(0,.9,0),n.renderer=new be.WebGLRenderer({antialias:!0,alpha:!0}),n.renderer.dispose(),n.renderer.setPixelRatio(window.devicePixelRatio),n.renderer.shadowMap.enabled=!0,n.renderer.toneMapping=be.ReinhardToneMapping,n.renderer.setSize(n.width,n.height),n.mountingDiv.appendChild(n.renderer.domElement),n.whiteLight1=new be.PointLight(16777215,4,1),n.whiteLight1.name="whiteLight",n.whiteLight1.position.set(0,1.5,-.5),n.whiteLight1.intensity=Oe.e.w1.low,n.whiteLight2=new be.PointLight(16777215,4,1),n.whiteLight2.name="whiteLight",n.whiteLight2.position.set(0,1.5,.5),n.whiteLight2.intensity=Oe.e.w2.low,n.orangeLight=new be.PointLight(15884545,0,100),n.orangeLight.intensity=Oe.e.orange.low,n.orangeLight.name="orangeLight",n.orangeLight.position.set(-1,2,-1),n.orangeLight.castShadow=!0,n.orangeLight.shadow.radius=2,n.blueLight=new be.PointLight(29116,0,100),n.blueLight.intensity=Oe.e.blue.low,n.blueLight.name="this.blueLight",n.blueLight.position.set(1,2,1),n.blueLight.castShadow=!0,n.blueLight.shadow.radius=2,n.lightsWrapper=new be.Object3D,n.lightsWrapper.name="lightsWrapper",n.lightsWrapper.add(n.whiteLight1,n.whiteLight2,n.orangeLight,n.blueLight),n.scene.add(n.lightsWrapper),t=Me(n.width,n.height,n.scene,n.camera,n.renderer),n.bloomComposer=t.bloomComposer,n.finalComposer=t.finalComposer;case 45:case"end":return e.stop()}}),e)}))),n._animateAgents=function(){var e=n.state.timeCounter;n.agentWrapper.children.forEach((function(t){for(var a=0;a<t.trips.length;a++)if(t.trips[a].path[e]){var n=t.trips[a].path[e];t.children[a].position.set(n[0],.705,n[1])}})),n.setState({timeCounter:n.state.timeCounter<Oe.g?n.state.timeCounter+n.state.simSpeed:0})},n.handleWindowResize=function(){var e=n.mountingDiv.clientWidth,t=n.mountingDiv.clientHeight;n.renderer.setSize(e,t),n.bloomComposer.setSize(e,t),n.finalComposer.setSize(e,t),n.camera.aspect=e/t,n.camera.updateProjectionMatrix()},n._chooseRenderer=function(){n.state.renderer?(n.bloomComposer.render(),n.finalComposer.render()):n.renderer.render(n.scene,n.camera)},n._cameraState=function(){"animateCamera"===n.props.menuInteraction.cameraScene?(n.theta+=n.cameraSpeed,n.camera.position.x=n.radius*Math.sin(be.MathUtils.degToRad(n.theta)),n.camera.position.y=1.5,n.camera.position.z=n.radius*Math.cos(be.MathUtils.degToRad(n.theta)),n.camera.lookAt(new be.Vector3(0,1.25,0)),n.camera.updateMatrixWorld()):function(e){if(e){var t=e.position;t.y<.3&&(t.y=.3),t.y>4&&(t.y=4)}}(n.camera)},n.startAnimationLoop=function(){n._cameraState(),ve.a.update(),n._animateAgents(),n._chooseRenderer(),n.requestID=window.requestAnimationFrame(n.startAnimationLoop)},n.state={loading:!0,timeCounter:0,simSpeed:1,trips:{},renderer:!1,past:!0,camLookAt:new be.Vector3(0,1.25,0)},n.theta=0,n.cameraSpeed=.5,n.radius=2.5,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.width=this.mountingDiv.clientWidth,this.height=this.mountingDiv.clientHeight,window.addEventListener("resize",this.handleWindowResize),setTimeout((function(){e._init()}),500)}},{key:"componentWillUnmount",value:function(){window.cancelAnimationFrame(this.requestID),window.removeEventListener("resize",this.handleWindowResize)}},{key:"componentDidUpdate",value:function(e){var t=this;e!==this.props&&function(){var a=t.props.menuInteraction,n=a.scenarioSwitch,r=a.parks,i=a.culturalBuildings,c=a.cars,o=a.bicycles,s=a.pedestrians,l=a.quality,u=a.cityModelSwitch,m=a.metricsObjSwitch,p=t.scene.getObjectByName("cityModel"),d=t.scene.getObjectByName("trips_car_before"),h=t.scene.getObjectByName("trips_car_after"),f=t.scene.getObjectByName("trips_pedestrians_before"),g=t.scene.getObjectByName("trips_pedestrians_after"),b=t.scene.getObjectByName("trips_bike_before"),v=t.scene.getObjectByName("trips_bike_after"),w=t.scene.getObjectByName("parks_before"),E=t.scene.getObjectByName("parks_after"),y=t.scene.getObjectByName("cultural_before"),S=t.scene.getObjectByName("cultural_after"),x=t.scene.getObjectByName("metricsObj");for(var O in e.menuInteraction)e.menuInteraction[O]!==t.props.menuInteraction[O]&&function(){switch(O){case"scenarioSwitch":[t.blueLight,t.orangeLight].forEach((function(e){new ve.a.Tween(e.position).to({x:-e.position.x,z:-e.position.z},2e3).easing(ve.a.Easing.Quadratic.Out).onUpdate((function(){})).start()})),ke(w,r),ke(E,n&&r),ke(y,i),ke(S,n&&i),ke(d,!n&&c),ke(h,n&&c),ke(b,!n&&o),ke(v,n&&o),ke(f,!n&&s),ke(g,n&&s),new ve.a.Tween(x.rotation).to({x:0,y:n?-3.14159:3.14159,z:0},2e3).easing(ve.a.Easing.Cubic.InOut).start().onStart((function(){x.material.forEach((function(e){e&&(e.map=n?e.userData.radarAfterText:e.userData.radarBeforeText,e.map.needsUpdate=!0)}))}));break;case"metricsObjSwitch":ke(x,m);break;case"parks":ke(w,r),ke(E,n&&r);break;case"culturalBuildings":ke(y,i),ke(S,n&&i);break;case"cars":ke(d,!n&&c),ke(h,n&&c);break;case"bicycles":ke(b,!n&&o),ke(v,n&&o);break;case"pedestrians":ke(f,!n&&s),ke(g,n&&s);break;case"quality":t.setState({renderer:l}),l?(t.blueLight.intensity=Oe.e.blue.high,t.orangeLight.intensity=Oe.e.orange.high,t.whiteLight1.intensity=Oe.e.w1.high,t.whiteLight2.intensity=Oe.e.w2.high):(t.blueLight.intensity=Oe.e.blue.low,t.orangeLight.intensity=Oe.e.orange.low,t.whiteLight1.intensity=Oe.e.w1.low,t.whiteLight2.intensity=Oe.e.w2.low);break;case"cityModelSwitch":ke(p,!!u);break;case"cameraScene":var e=t.props.menuInteraction.cameraScene,a=Oe.a[e].camPos,k=Oe.a[e].lookAt,j=new be.Vector3(k[0],k[1],k[2]);new ve.a.Tween(t.camera.position).to({x:a[0],y:a[1],z:a[2]},1e3).easing(ve.a.Easing.Quadratic.Out).onUpdate((function(){t.camera.lookAt(j)})).start()}}()}()}},{key:"_onMouseUp",value:function(e){var t=new be.Vector2,a=new be.Raycaster;t.x=e.clientX/this.width*2-1,t.y=-e.clientY/this.height*2+1,a.setFromCamera(t.clone(),this.camera);var n=a.intersectObjects(this.scene.children);if(n[0]&&n[0].point){console.log(n[0].object);var r=n[0].point;this.controls.target.set(r),this.controls.update()}}},{key:"render",value:function(){var e=this,t=this.props.startScene;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:t?{height:"100%",position:"fixed",width:"100%",top:0,left:0,backgroundColor:"black",visibility:""}:{height:"100%",width:"100%",position:"fixed",top:0,left:0,backgroundColor:"black",visibility:"hidden"},ref:function(t){return e.mountingDiv=t}}))}}]),a}(n.Component),Ue={setLoadingState:function(e){return{type:"SET_LOADING_STATE",data:e}}},qe=Object(v.b)((function(e){return{startScene:e.START_SCENE}}),Ue)(Be),ze=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(qe,{menuInteraction:this.props.menuInteraction}),this.props.showMenu?r.a.createElement(de,null):null,r.a.createElement(N,null))}}]),a}(n.Component),Ve=Object(v.b)((function(e){return{menuInteraction:e.MENU_INTERACTION,showMenu:e.START_SCENE}}),null)(ze),Ge=function(e){var t=e.children,a=e.store;return r.a.createElement(v.a,{store:a},t)},He=a(58),Ze={LOADING:!0,START_SCENE:!1,MENU_INTERACTION:Oe.c};function Xe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOADING_STATE":return Object(A.a)({},e,{LOADING:t.data});case"SET_START_SCENE":return Object(A.a)({},e,{START_SCENE:t.data});case"MENU_INTERACTION":return Object(A.a)({},e,{MENU_INTERACTION:t.data});default:return e}}var $e=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),Qe=function(){return Object(He.b)(Xe,$e)}(),Je=document.getElementById("root");c.a.render(r.a.createElement(Ge,{store:Qe},r.a.createElement(Ve,null)),Je)},9:function(e){e.exports=JSON.parse('{"c":{"scenarioSwitch":false,"parks":true,"culturalBuildings":true,"cars":true,"bicycles":true,"pedestrians":true,"cameraScene":"animateCamera","quality":false,"cityModelSwitch":true,"metricsObjSwitch":true,"thisToggleName":""},"a":{"Triomphe":{"camPos":[-0.62,1.2,-0.03],"lookAt":[-0.62,0.5,-0.03]},"Champs":{"camPos":[0,1.35,0.5],"lookAt":[0,0.5,0.2]},"Palais":{"camPos":[0.6,1.2,-0.5],"lookAt":[0.5,0.5,0.8]},"Concorde":{"camPos":[1.25,1,0],"lookAt":[-1,0.75,0]}},"e":{"orange":{"high":0.85,"low":2.75},"blue":{"high":0.85,"low":2.75},"w1":{"high":3,"low":9},"w2":{"high":3,"low":9}},"g":500,"b":"./resources/model/city/city_sml.obj","d":{"parks_before":{"URL":"resources/model/park/parks_before.obj","color":"(80, 100%, 20%)","position":[0.09,0.702,0.01],"scale":0.000505},"parks_after":{"URL":"resources/model/park/parks_after.obj","color":"(80, 100%, 50%)","position":[0.09,0.7015,0.01],"scale":0.000505},"cultural_before":{"URL":"resources/model/culture/culture_before.obj","color":"(312, 50%, 50%)","position":[0.3,0.695,0.08],"scale":0.0355},"cultural_after":{"URL":"resources/model/culture/culture_after.obj","color":"(312, 100%, 50%)","position":[0.3,0.69,0.08],"scale":0.0355}},"f":{"ppl":"resources/ppl/ppl.obj"},"h":{"trips_car_before":{"dataObj":"trips_car_before","color":{"h":1,"s":1,"l":0.3},"URL":"resources/trips/real/trips_car_before.json"},"trips_car_after":{"dataObj":"trips_car_after","color":{"h":1,"s":1,"l":0.5},"URL":"resources/trips/real/trips_car_after.json"},"trips_pedestrians_before":{"dataObj":"trips_pedestrians_before","color":{"h":0,"s":0,"l":0.85},"URL":"resources/trips/real/trips_people_before.json"},"trips_pedestrians_after":{"dataObj":"trips_pedestrians_after","color":{"h":0,"s":0,"l":1},"URL":"resources/trips/real/trips_people_after.json"},"trips_bike_before":{"dataObj":"trips_bike_before","color":{"h":0.55,"s":1,"l":0.3},"URL":"resources/trips/real/trips_bike_before.json"},"trips_bike_after":{"dataObj":"trips_bike_after","color":{"h":0.55,"s":1,"l":0.5},"URL":"resources/trips/real/trips_bike_after.json"}}}')}},[[121,1,2]]]);
//# sourceMappingURL=main.e9683f7b.chunk.js.map